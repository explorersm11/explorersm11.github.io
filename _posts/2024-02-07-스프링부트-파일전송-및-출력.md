---
title: íŒŒì¼ ì „ì†¡ ë° ì¶œë ¥
author: explorersm11
date: 2024-02-07 11:42:00 +0900
categories: [SpringBoot, Study]
tags: [springboot, spring, til]
render_with_liquid: false
---  
## <span style="background-color: #fff5b1">ğŸ’¾ íŒŒì¼ ì „ì†¡ ì‹œ</span>

### íŒŒì¼ì„ ì „ì†¡í•˜ëŠ” Viewì˜ \<form>íƒœê·¸
- ì „ì†¡ ë°©ì‹ì€ post ë°©ì‹ìœ¼ë¡œ ë³´ë‚´ëŠ” ê²ƒì´ ë‹¹ì—°í•˜ë‹¤.
- ì¸ì½”ë”© íƒ€ì…ì„ ëª…ì‹œí•˜ëŠ” enctype ì†ì„±ê³¼ ì†ì„±ê°’ìœ¼ë¡œ "multipart/form-data"ë¥¼ ì§€ì •í•´ì¤€ë‹¤.
  - ì¸ì½”ë”© ì†ì„±ì„ ëª…ì‹œí•˜ì§€ ì•Šì€ post ë°©ì‹ì˜ enctype ê¸°ë³¸ê°’ì€ "application/x-www-form-urlcencoded" ì´ë‹¤.
  - ë§Œì•½, íŒŒì¼ ì „ì†¡ì´ ì—†ë‹¤ë©´ "application/x-www-form-urlcencoded", ë˜ëŠ” enctype ì†ì„±ì„ ì§€ì •í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ê°€ì¥ íš¨ìœ¨ì ì¸ ë°©ë²•ì´ë‹¤.
  
   ```html
   <form action="~~~" method="post" enctype="multipart/form-data">
   ```

<br>


### ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë©”ì†Œë“œ ì‘ì„±
1. ë§¤ê°œë³€ìˆ˜ë¡œ MultipartFileì„ ë„£ì–´ì¤€ë‹¤.
     -  MultipartFile : ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ íŒŒì¼ì„ í•¸ë“¤ëŸ¬ì—ì„œ ì†ì‰½ê²Œ ë‹¤ë£° ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” Handlerì˜ ë§¤ê°œë³€ìˆ˜ì¤‘ í•˜ë‚˜.
     ```java
     public String method(MultipartFile file){}
     ```
2. íŒŒì¼ ì €ì¥ ì‹œ ì´ë¦„ì´ ì¤‘ë³µë˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•˜ì—¬ UUID ì´ìš©
     - UUID(Universally Unique IDentifier): ë²”ìš©ê³ ìœ ì‹ë³„ì
    ```java
    String uuid = UUID.randomUUID().toString();
    ```
3. MultipartFileë¡œë¶€í„° ì—…ë¡œë“œë˜ëŠ” íŒŒì¼ì—ì„œ í™•ì¥ìë¥¼ í¬í•¨í•œ íŒŒì¼ì˜ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
   ```java
   file.getOriginalFilename();
   ```

4. UUID + ê¸°ì¡´ íŒŒì¼ ì´ë¦„
   ```java
   String filename = uuid + "_" + file.getOriginalFilename();
   ```

5. ì €ì¥ì„ í•˜ê¸° ìœ„í•œ ê²½ë¡œë¥¼ ê°€ì§€ê³  ìˆì„ ê°ì²´ ìƒì„±
   1. application.propertiesì— ê²½ë¡œ ì •ë³´ ì €ì¥
      - application.propertiesëŠ” ìš°ë¦¬ê°€ ì›í•˜ëŠ” ì •ë³´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ê¸°ë„ í•œë‹¤.
      - ì˜ˆë¥¼ ë“¤ì–´, API Keyì™€ ê°™ì´ ë³´ì•ˆì ìœ¼ë¡œ ìˆ¨ê²¨ì•¼ í•˜ëŠ” ì •ë³´ë‚˜ ì—¬ëŸ¬ íŒŒì¼ì—ì„œ ê³µìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê°’ì¼ ê²½ìš°.
      - ë°°í¬ ì‹œì— í´ë” ê²½ë¡œê°€ ë°”ë€Œì–´ì•¼ í•˜ëŠ”ë° ì¼ì¼ì´ ë³€ê²½í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ì—†ìŒ.
      - Key : Value
      ```properties
      my.savepath=C:/save
      ```

   2. application.propertiesì— ì €ì¥í•´ë‘” ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
      - @Value ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ Key ì§€ì •
      ```java
      @Value("${my.savepath}")
	   private String save_path; // "C:/save"
      ```

   3. ê°ì²´ ìƒì„±
   ```java
   Path path = Paths.get(save_path + filename);
   ```

6. íŒŒì¼ë¡œ ì €ì¥
   - íŒŒì¼ë¡œ ì €ì¥í•  ë•Œì—ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ê¼­ í•´ì•¼í•œë‹¤.
   ```java
   try {
			file.transferTo(path);

		} catch (Exception e) {
			e.printStackTrace();
		}
   ```

<br>
<hr>
<br>

## <span style="background-color: #fff5b1">ğŸ’» íŒŒì¼ ì¶œë ¥ ì‹œ</span>
Viewì—ì„œ ì´ë¯¸ì§€ë¥¼ ì¶œë ¥í•˜ê¸° ìœ„í•´ \<img>íƒœê·¸ì˜ src ì†ì„±ì— ê²½ë¡œë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì…ë ¥í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í•œë‹¤.
```html
<img src="C:/save/${attr.value}">
```

ê·¸ë ‡ê¸°ì—!

### íŠ¹ì • ì„¤ì •ì„ ìœ„í•œ í´ë˜ìŠ¤ íŒŒì¼ ìƒì„±
í´ë˜ìŠ¤ ì´ë¦„ì„ TestConfigë¡œ ìƒì„±í–ˆë‹¤ê³  ê°€ì •í•´ë³´ì.

1. ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ @Configurationì„ ì§€ì •í•´ì¤€ë‹¤.
2. ìœ„ì—ì„œ application.propertiesì— ì €ì¥í•´ë‘” ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤.
   ```java
   @Value("${my.savepath}")
	private String save_path;
   ```
3. ì¸í„°í˜ì´ìŠ¤ì¸ WebMvcConfigurerë¡œë¶€í„° ìƒì†ë°›ì•„ ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•œë‹¤.
   ```java
   @Configuration
   public class TestConfig implements WebMvcConfigurer{}
   ```

4. addResourceHandlers ë©”ì†Œë“œë¥¼ ì •ì˜í•œë‹¤.
   ```java
   @Override
	public void addResourceHandlers(ResourceHandlerRegistry registry) {

		registry.addResourceHandler("/save/**") // ì–´ë–¤ URL ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ
				  .addResourceLocations("file:///" + save_path); // ì–´ë–¤ í´ë”ë¥¼ í–¥í•˜ëŠ”ì§€
	}
   ```

<br>


### Viewì—ì„œ íŒŒì¼ ì¶œë ¥
ìœ„ ê³¼ì •ì—ì„œ ìš”ì²­ URLì„ '/save/**'ë¡œ ì§€ì •í•´ë’€ìœ¼ë‹ˆ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
```html
<img src="save/${attr.value}">
```